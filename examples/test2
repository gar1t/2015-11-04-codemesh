#!/bin/bash -eu

some-list() {
     echo 1
     echo 2
     echo 3
}

do-something() {
    echo "Got $1"
}

some-list | while read x; do
    do-something $x
done
